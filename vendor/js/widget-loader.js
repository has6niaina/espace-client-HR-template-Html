!function(e){var t={};function o(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t){var o,n,r,i,s,c,a,d;window,o=function(){},n=function(e,t){t||(t={});for(var o=(t.url?t.url.match(/(\?.*)/)[1]:window.location.search).substring(1).split("&"),n=0;n<o.length;n++){var r=o[n].split("=");if(decodeURIComponent(r[0])===e)return decodeURIComponent(r[1])}},r=function(e,t){var o;for(o in t)e[o]=t[o];return e},i=function(e,t){var o,n;if("object"==typeof e)for(n in e)e.hasOwnProperty(n)&&(o=e[n],t.call(null,o,n))},s=function(e){var t;try{t=JSON.parse(e)}catch(e){console.warn("Error: Could not parse the given string to object. Error:",e)}return t},c={call:function(e){if("object"==typeof e||(e={}),"string"==typeof e.type&&(e.type=e.type.toUpperCase()),"function"==typeof e.success||(e.success=o),"function"==typeof e.error||(e.error=o),"boolean"==typeof e.crossDomain||(e.crossDomain=this._isCORS(e.url)),e.crossDomain){var t=this._ieVersion();client=8===t||9===t?this._ieCORS(e):this._ajax(e)}else client=this._ajax(e);return client},_ajax:function(e){var t,o=this,n=this._createStandardXHR()||createActiveXHR();return i(e.headers,(function(e,t){n.setRequestHeader(t,e)})),"number"==typeof e.timeout&&(n.timeout=e.timeout,n.ontimeout=function(){1!=e.sentResponse&&(e.sentResponse=!0,e.error.call(e.context,new Error("Ajax failed due to timeout. Timeout: "+e.timeout+" ms"),n,e))}),n.onreadystatechange=function(){e.sentResponse||4==n.readyState&&(e.sentResponse=!0,n.status>=200&&n.status<300||304==n.status?(t=o._responseParser(e,n.responseText)).error?e.error.call(e.context,t.error,n,e):e.success.call(e.context,t.result,n,e):e.error.call(e.context,new Error("Ajax failed"),n,e))},n.open(e.type,e.url,!0),n.send(e.data),n},_responseParser:function(e,t){var o,n;if("json"===e.dataType)try{o=JSON.parse(t)}catch(e){n=e}return{result:o,error:n}},_ieCORS:function(e){var t,o=this,n=this._createXDomainRequest();return"number"==typeof e.timeout&&(n.timeout=e.timeout),n.open(e.type,e.url),n.onload=function(){e.sentResponse||(t=o._responseParser(e,n.responseText),e.sentResponse=!0,t.error?e.error.call(e.context,t.error,n,e):e.success.call(e.context,t.result,n,e))},n.onerror=function(){e.sentResponse||(e.sentResponse=!0,e.error.call(e.context,new Error("Ajax failed"),n,e))},n.ontimeout=function(){e.sentResponse||(e.sentResponse=!0,e.error.call(e.context,new Error("Ajax failed due to timeout. Timeout: "+e.timeout+" ms"),n,e))},n.onprogress=function(){},setTimeout((function(){n.send(e.data)}),200),n},_ieVersion:function(){return this.__ieVersion||(this.__ieVersion=this._getIEVersion())},_isCORS:function(e){return this._getCurrentDomainName()!==this._getDomainName(e)},_getCurrentDomainName:function(){return this.__currentDomainName||(this.__currentDomainName=this._getDomainName(window.location.href))},_getDomainName:function(e){var t,o="";try{o=((t=e.split("//"))[1]||t[0]).split("/")[0].replace("www.","")}catch(t){console.error('Exception caught while finding domain name from given URL. Given URL: "'+e+'". Error:',t)}return o},_getIEVersion:function(){var e=window.navigator&&window.navigator.userAgent.toLowerCase()||"";return-1!=e.indexOf("msie")&&parseInt(e.split("msie")[1])},_createStandardXHR:function(){try{return new window.XMLHttpRequest}catch(e){}},_createActiveXHR:function(){try{return new window.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}},_createXDomainRequest:function(){try{return new window.XDomainRequest}catch(e){}}},a={hfcScriptUrls:["https://widget.happyfoxchat.com/visitor/js/widget-loader.js","https://widget.happyfoxchat.net/visitor/js/widget-loader.js","http://localhost:5000/visitor/js/widget-loader.js"],load:function(e,t){e||(e={});var o,n=document.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",e.src),n.readyState?n.onreadystatechange=function(){"complete"!==this.readyState&&"loaded"!==this.readyState||(window.clearTimeout(o),t(null,n))}:n.onload=function(){window.clearTimeout(o),t(null,n)},(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(n),o=window.setTimeout((function(){t(new Error("Timedout to load script. Script src: "+e.src))}),3e4)},getCurrentScript:function(){if(void 0!==window.document.currentScript)return window.document.currentScript;var e=this.hfcScriptsUrls,t=window.document.getElementsByTagName("script");for(var o in e){var n=e[o];for(var r in t){var i=t[r];if(i.src&&-1!==i.src.indexOf(n))return i}}}},d={polyfill:function(){this.assignHFCConfig()},assignHFCConfig:function(){if(!this.isValidConfig(window.HFCHAT_CONFIG)){var e=this.getHFCConfigObject();"object"==typeof e&&("object"==typeof window.HFCHAT_CONFIG?window.HFCHAT_CONFIG=r(window.HFCHAT_CONFIG,e):window.HFCHAT_CONFIG=e)}},getHFCConfigObject:function(){var e=a.getCurrentScript().src,t={EMBED_TOKEN:n("ET",{url:e}),ASSETS_URL:n("A",{url:e})};if(this.isValidConfig(t))return t},isValidConfig:function(e){var t=!1;return"object"==typeof e&&e.EMBED_TOKEN&&e.ASSETS_URL&&(t=!0),t}},{initialize:function(){return this.clearV1GlobalTrace(),this.isDigested()?console.warn&&console.warn("HappyFoxChat: Found duplicate widgets."):(this.doPolyfill(),this.createGlobalTrace(),this.load(),this.digest()),this},doPolyfill:function(){d.polyfill()},createGlobalTrace:function(){window.HFCHAT_META={digested:!1,version:1}},digest:function(){try{"object"==typeof window.HFCHAT_META||(window.HFCHAT_META={}),window.HFCHAT_META.digested=!0}catch(e){}},isDigested:function(){var e=!1;try{e=!0===window.HFCHAT_META.digested}catch(e){}return e},load:function(){var e=this.getJsSdkOptions();e.loadInstantly||e.isAndroidSdk||e.isIosSdk?this.fetchVersionAndLoadAssetsOnce():this.loadOnUserAction()},loadOnUserAction:function(){var e=this,t=this.getJsSdkOptions();try{var o=function(){e.fetchVersionAndLoadAssetsOnce(),e.detachUserActionEvents(o)};this.attachUserActionEvents(o)}catch(e){console.warn("HappyFoxChat: Could not attach user action events. So loading widget instantly."),t.debug&&console.error("Error:",e),this.fetchVersionAndLoadAssetsOnce()}},fetchVersionAndLoadAssetsOnce:function(){this._isVersionFetchedAndAssetsLoaded||(this.fetchVersionAndLoadAssets(),this._isVersionFetchedAndAssetsLoaded=!0)},fetchVersionAndLoadAssets:function(){var e=this;this.getVersion((function(t,o){t?console.error("Failed to fetch version, so could not load widget. Error:",t):e.loadAssets(o)}))},loadAssets:function(e){switch(this.configureByVersion(e),e){case"v1":this.loadV1Vendor(),this.loadV1WidgetCore();break;case"v2":this.loadV2Vendor(),this.loadV2WidgetCore()}},loadV1Vendor:function(){a.load({src:this.getV1VendorScriptURL()},(function(e){e&&console.error("Failed to load widget-loader-core vendor script file. Error:",e)}))},loadV1WidgetCore:function(){a.load({src:this.getV1WidgetLoaderCoreScriptURL()},(function(e){e&&console.error("Failed to load widget-loader-core script file. Error:",e)}))},loadV2Vendor:function(){a.load({src:this.getV2WidgetLoaderCoreVendorScriptURL()},(function(e){e&&console.error("Failed to load widget-loader-core vendor script file. Error:",e)}))},loadV2WidgetCore:function(){a.load({src:this.getV2WidgetLoaderCoreScriptURL()},(function(e){e&&console.error("Failed to load widget-loader-core script file. Error:",e)}))},getV1VendorScriptURL:function(){return window.HFCHAT_CONFIG.ASSETS_URL+"/js/vendor-36ea41d4bbd386d1c1c3.js"},getV1WidgetLoaderCoreScriptURL:function(){return window.HFCHAT_CONFIG.ASSETS_URL+"/js/widget-loader-core-1244e67e59a1d15d770c1048fd82b4eb.js"},getV2WidgetLoaderCoreVendorScriptURL:function(){return window.HFCHAT_CONFIG.ASSETS_URL+"/js/widget-loader-core.vendor-5983fe5299a02e39c558.js"},getV2WidgetLoaderCoreScriptURL:function(){return window.HFCHAT_CONFIG.ASSETS_URL+"/js/widget-loader-core-ab67f79ad95e2c37d9891687fa94732f.js"},clearV1GlobalTrace:function(){window.HFCHAT_META&&isNaN(HFCHAT_META.version)&&delete window.HFCHAT_META},getJsSdkOptions:function(){return window.HFCHAT_CONFIG&&window.HFCHAT_CONFIG.options||{}},attachUserActionEvents:function(e){var t={once:!0};window.addEventListener("touchstart",e,t),window.addEventListener("touchend",e,t),window.addEventListener("mousedown",e,t),window.addEventListener("mouseup",e,t),window.addEventListener("click",e,t),window.addEventListener("dblclick",e,t),window.addEventListener("mousemove",e,t),window.addEventListener("mouseout",e,t),window.addEventListener("contextmenu",e,t),window.document.body.addEventListener("mouseover",e,t),window.document.body.addEventListener("mouseenter",e,t),window.document.body.addEventListener("mouseleave",e,t),window.addEventListener("scroll",e,t)},detachUserActionEvents:function(e){window.removeEventListener("touchstart",e),window.removeEventListener("touchend",e),window.removeEventListener("mousedown",e),window.removeEventListener("mouseup",e),window.removeEventListener("click",e),window.removeEventListener("dblclick",e),window.removeEventListener("mousemove",e),window.removeEventListener("mouseout",e),window.removeEventListener("contextmenu",e),window.document.body.removeEventListener("mouseover",e),window.document.body.removeEventListener("mouseenter",e),window.document.body.removeEventListener("mouseleave",e),window.removeEventListener("scroll",e)},getVersion:function(e){var t=this,o=this.getPrevVersion(),n="v1";this.getCurrentVersion((function(r,i){r?console.error("Failed to fetch account current version. Error:",r,'Falling back to "'+n+'" widget'):n=t.getGracefullySwitchedVersion(o,i),e(null,n)}))},getGracefullySwitchedVersion:function(e,t){var o,n="v1";return e?e===t?n=t:"waiting_for_agent"===(o=this.getVisitorState())||"waiting"===o||"chatting"===o?(console.info('Visitor is chatting/waiting for agent in "'+e+'" version, so not switching to "'+t+'" version.'),n=e):(this.clearHfcLocalStorage(),n=t,console.info('Switched to newer version i.e. "'+t+'" version.')):(console.info('Unable to find prev version of company, so loading newer version i.e. "'+t+'"'),this.clearHfcLocalStorage(),n=t),n},getCurrentVersion:function(e){var t;this.fetchCurrentVersion((function(o,n){o?(console.error("Failed to fetch account version. Error:",o),e(new Error("Failed to fetch account version"),null)):n?(t=n.isV2?"v2":"v1",e(null,t)):(console.error("Invalid version response"),e(new Error("Invalid version response"),null))}))},fetchCurrentVersion:function(e){c.call({type:"GET",url:this.getVersionUrl(),dataType:"json",success:function(t,o){e(null,t)},error:function(t,o,n){e(t,o,n)}})},getVersionUrl:function(){return"https://happyfoxchat.com/company/"+window.HFCHAT_CONFIG.EMBED_TOKEN+"/version/"},configureByVersion:function(e){switch(e){case"v2":this.isV2AssetsUrl()||this.changeToV2AssetsUrl();break;case"v1":this.isV2AssetsUrl()&&this.changeToV1AssetsUrl();break;default:console.warn('Unknown version number. Falling back to "v1" version'),this.isV2AssetsUrl()&&this.changeToV1AssetsUrl()}},isV2AssetsUrl:function(){var e=window.HFCHAT_CONFIG.ASSETS_URL;return"string"==typeof e&&-1!==e.indexOf("/v2/")},changeToV1AssetsUrl:function(){window.HFCHAT_CONFIG.ASSETS_URL=window.HFCHAT_CONFIG.ASSETS_URL.replace("/v2/","/")},changeToV2AssetsUrl:function(){var e=window.HFCHAT_CONFIG.ASSETS_URL.indexOf("/visitor");window.HFCHAT_CONFIG.ASSETS_URL=window.HFCHAT_CONFIG.ASSETS_URL.slice(0,e)+"/v2"+window.HFCHAT_CONFIG.ASSETS_URL.slice(e)},getPrevVersion:function(){var e,t=window.HFCHAT_CONFIG.EMBED_TOKEN,o=window.localStorage.getItem(this.getLocalStorageMetaKey(t)),n=s(o);return n&&n.version?e=n.version:console.warn("Failed to get company previous version"),e},getVisitorState:function(){var e="passive",t=window.HFCHAT_CONFIG.EMBED_TOKEN,o=window.localStorage.getItem(this.getLocalStorageVisitorKey(t)),n=s(o);return n&&n.state?e=n.state:console.warn('Failed to get visitor state from local storage. so fallling back to default state i.e. "'+e+'".'),e},getLocalStorageMetaKey:function(e){return"hfc-meta-"+e},getLocalStorageVisitorKey:function(e){return"hfc-visitor-"+e},clearHfcLocalStorage:function(){var e=window.HFCHAT_CONFIG.EMBED_TOKEN;i(localStorage,(function(t,o){o&&0===o.indexOf("hfc-")&&-1!==o.indexOf(e)&&window.localStorage.removeItem(o)}))}}.initialize()}]);