"use strict";
function closeTool(){
    $(".tool-block").removeClass("active");

    /*$('.grid').masonry({
        // options
        itemSelector: '.grid-item',
    });*/
}
function openTool (id) {
    $(id).addClass("active");
}
"use strict";

var INTELCIA_script = INTELCIA_script || {};
(function ($, undefined) {
    $(document).ready(function () {
        INTELCIA_script.global.init();
        INTELCIA_script.header.init();
    });
})(jQuery);


"use strict";

var $ = jQuery;

INTELCIA_script.global = {
    init: function () {

        // Lazy load Avatar Search
        //$('.lazy-img').lazy();

        // Gestion de l'Ã©venement Like/Unlike
        $(".like-bloc").click(function () {
            $(this).toggleClass("active");
        });


        if ($('#sticky_tools').length) {
            // Get the offset position of the navbar
            var sticky = $('#sticky_tools').offset().top;
            // When the user scrolls the page, execute...
            $(window).scroll(function () {
                if (window.pageYOffset > (sticky - 50)) {
                    $('#sticky_tools').addClass("sticky");
                } else {
                    $('#sticky_tools').removeClass("sticky");
                }
            });
        }

        $(window).resize(function () {
            /*if ($(window).width() > 768) {
              $("#rihgt_quiz").removeClass('active');
            }*/
        });

        // custom scrollbar
        //$(".custom-scroll").niceScroll();

        // Calendrier A ne pas manquer
        if ($('#calendar').length) {
            $('#calendar').jalendar({
                color: '#f9f9f9',
                color2: '#f9f9f9',
                dayColor: '#484848',
                titleColor: '#e13288',
                weekColor: '#484848',
                todayColor: '#484848',
                lang: 'FR',
            });
        }
        // bloc ACI
        if($(".bloc-aci .owl-carousel").length) {
            $(".bloc-aci .owl-carousel").owlCarousel({ stagePadding: 5, autoplay: !0, loop: !0, margin: 10, dots: !0, nav: !1, responsive: { 0: { items: 1 }, 600: { items: 1 }, 1e3: { items: 1 } } });
        }

        // Slider "Articles simulaire"
        if ($('.similar-articles .owl-carousel').length) {
            var $owl = $('.similar-articles .owl-carousel').owlCarousel({
                loop: true,
                margin: 10,
                dots: false,
                nav: true,
                navText: [
                    '<i class="fa fa-angle-left" aria-hidden="true"></i>',
                    '<i class="fa fa-angle-right" aria-hidden="true"></i>'
                ],
                responsive: {
                    0: {
                        items: 1
                    },
                    600: {
                        items: 2
                    },
                    1000: {
                        items: 3
                    }
                }
            });
        }

        if ($('.images-carousel .owl-carousel').length) {
            var $owl = $('.images-carousel .owl-carousel').owlCarousel({
                stagePadding: 50,
                loop: true,
                margin: 10,
                dots: false,
                nav: true,
                navText: [
                    '<i class="fa fa-angle-left" aria-hidden="true"></i>',
                    '<i class="fa fa-angle-right" aria-hidden="true"></i>'
                ],
                responsive: {
                    0: {
                        items: 1,
                        stagePadding: 50,
                        loop: true,
                        margin: 10,
                        dots: false,
                        nav: true,
                        navText: [
                            '<i class="fa fa-angle-left" aria-hidden="true"></i>',
                            '<i class="fa fa-angle-right" aria-hidden="true"></i>'
                        ]
                    },
                    600: {
                        items: 1,
                        stagePadding: 50,
                        loop: true,
                        margin: 10,
                        dots: false,
                        nav: true,
                        navText: [
                            '<i class="fa fa-angle-left" aria-hidden="true"></i>',
                            '<i class="fa fa-angle-right" aria-hidden="true"></i>'
                        ]
                    },
                    1000: {
                        items: 1,
                        stagePadding: 50,
                        loop: true,
                        margin: 10,
                        dots: false,
                        nav: true,
                        navText: [
                            '<i class="fa fa-angle-left" aria-hidden="true"></i>',
                            '<i class="fa fa-angle-right" aria-hidden="true"></i>'
                        ]
                    }
                }
            })
        }

        // home page search result - scroll to bottom
        if ($('.tool-cta').length) {
            $('.tool-cta').click(function () {
                var id = $(this).data('target');
                var inline = $(this).data('inline');
                var opened = $(id).hasClass("active");
                if (!inline) {
                    closeTool();
                }
                else {
                    $('.inline-tool').removeClass("active");
                }
                if (!opened) {
                    openTool(id);
                }
            });
        }

        // home page search result - scroll to bottom
        if ($('.tool-profile-cta').length) {

            $('.tool-profile-cta').click(function () {
                if ($('.images-carousel .owl-carousel').length) {
                    //$owl.trigger('refresh.owl.carousel');
                    //$owl.trigger('refresh.owl.carousel');
                }
                $('.collapsible-container').toggleClass("push-container");
                /*$('.grid').masonry({
                  // options
                  itemSelector: '.grid-item',
                });*/
                //$("#rihgt_quiz").toggleClass("active");
            });
        }
        if ($('.close-block-tool').length) {
            $('.close-block-tool').click(function () {
                closeTool();
            });
        }
        if ($('.open-intelcia-menu').length) {
            $('.open-intelcia-menu, .menu__blocker').click(function () {
                $('.left-side-menu-container').addClass("active");
                $('.app-drawer-overlay').removeClass("d-none");
            });
        }
        if ($('.close-intelcia-menu').length) {
            $('.close-intelcia-menu').click(function () {
                $('.left-side-menu-container').removeClass("active");
                $('.app-drawer-overlay').addClass("d-none");
                $('.menu__breadcrumbs > a:first-child')[0].click();
            });
        }
        /*if ($('.grid').length) {
          $('.grid').masonry({
            // options
            itemSelector: '.grid-item',
          });
        }*/
        if ($('#responsive_slider').length) {
            $('#responsive_slider').lightSlider({
                pager: false,
                loop: true,
                item: 1,
                prevHtml: '<span class="more-arrow fs-26 color-intelcia op-05 rotate-180"></span>',
                nextHtml: '<span class="more-arrow fs-26 color-intelcia op-05"></span>',
            });
        }
        $(document).on('shown.bs.tab', 'a[data-toggle="tab"]', function (e) {
            console.log("mansory");
            /*$('.grid').masonry({
              // options
              itemSelector: '.grid-item',
            });*/
        });
        /*if ($('.home-tabs-container').length) {
          $('.home-tabs-container').resize(function () {
            $('.grid').masonry({
              // options
              itemSelector: '.grid-item',
            });
          });
        }*/


        if ($('.masonry-container').length) {
            var $container = $('.masonry-container');
            $container.imagesLoaded(function () {
                /*$container.masonry({
                  columnWidth: '.item',
                  itemSelector: '.item'
                });*/
            });

            //Reinitialize masonry inside each panel after the relative tab link is clicked -
            $('a[data-toggle=tab]').each(function () {
                var $this = $(this);

                $this.on('shown.bs.tab', function () {
                    console.log("bs tab");

                    $container.imagesLoaded(function () {
                        /* $container.masonry({
                           columnWidth: '.item',
                           itemSelector: '.item'
                         });*/
                    });

                }); //end shown
            });  //end each
        }

        if ($(window).width() > 768) {
            //$("#rihgt_quiz").addClass('active');
            $(document).mouseup(function (e) {
                var container = $(".left-side-menu-container");
                // if the target of the click isn't the container nor a descendant of the container
                if (!container.is(e.target) && container.has(e.target).length === 0) {
                    $('.menu__breadcrumbs > a:first-child')[0].click();
                    $(".left-side-menu-container").removeClass("active");
                    $('.app-drawer-overlay').addClass("d-none");
                }
            });
        }

        /**
         * Smooth scrolling to page anchor on click
         **/
        $("main.main-container a[href*='#']:not([href='#'])").click(function () {
            console.log("smooth");
            if (location.hostname == this.hostname && this.pathname.replace(/^\//, "") == location.pathname.replace(/^\//, "")) {
                var anchor = $(this.hash);
                anchor = anchor.length ? anchor : $("[name=" + this.hash.slice(1) + "]");
                if (anchor.length) {
                    $("html, body").animate({ scrollTop: anchor.offset().top }, 1500);
                }
            }
        });

    }
};
"use strict";

/**
 * Header class
 */

INTELCIA_script.header = {
    init: function () {
        var menuEl = document.getElementById('ml-menu'),
            mlmenu = new MLMenu(menuEl, {
                // breadcrumbsCtrl : true, // show breadcrumbs
                // initialBreadcrumb : 'all', // initial breadcrumb text
                backCtrl : false, // show back button
                // itemsDelayInterval : 60, // delay between each menu item sliding animation
            });

        // mobile menu toggle
        var openMenuCtrl = document.querySelector('.action--open'),
            closeMenuCtrl = document.querySelector('.action--close');

        if ($('.action--open').length){
            openMenuCtrl.addEventListener('click', openMenu);
        }

        if ($('.action--close').length){
            closeMenuCtrl.addEventListener('click', closeMenu);
        }


        function openMenu() {
            classie.add(menuEl, 'menu--open');
            closeMenuCtrl.focus();
        }

        function closeMenu() {
            classie.remove(menuEl, 'menu--open');
            openMenuCtrl.focus();
        }

        // simulate grid content loading
        var gridWrapper = document.querySelector('.content');
    }
};

// Custom JS

$(function () {
    $("#search-employees-form").on('submit',function (event) {
        event.preventDefault();

        const query = $("#search-employees-input").val();

        $("#search-employees-final-input").val(query);

        $("#_IN2_SEARCH_COLLOBORATOR_PORTLET_fm").submit();

    });
});


// podcasts

function owlCarousel() {
    // Slider "Articles simulaire"
    if ($('.similar-articles .owl-carousel').length) {
        var $owl = $('.similar-articles .owl-carousel').owlCarousel({
            loop: true,
            margin: 10,
            dots: false,
            nav: true,
            navText: [
                '<i class="fa fa-angle-left" aria-hidden="true"></i>',
                '<i class="fa fa-angle-right" aria-hidden="true"></i>'
            ],
            responsive: {
                0: {
                    items: 1
                },
                600: {
                    items: 2
                },
                1000: {
                    items: 3
                }
            }
        });
    }

    if ($('.images-carousel .owl-carousel').length) {
        var $owl = $('.images-carousel .owl-carousel').owlCarousel({
            stagePadding: 50,
            loop: true,
            margin: 10,
            dots: false,
            nav: true,
            navText: [
                '<i class="fa fa-angle-left" aria-hidden="true"></i>',
                '<i class="fa fa-angle-right" aria-hidden="true"></i>'
            ],
            responsive: {
                0: {
                    items: 1,
                    stagePadding: 50,
                    loop: true,
                    margin: 10,
                    dots: false,
                    nav: true,
                    navText: [
                        '<i class="fa fa-angle-left" aria-hidden="true"></i>',
                        '<i class="fa fa-angle-right" aria-hidden="true"></i>'
                    ]
                },
                600: {
                    items: 1,
                    stagePadding: 50,
                    loop: true,
                    margin: 10,
                    dots: false,
                    nav: true,
                    navText: [
                        '<i class="fa fa-angle-left" aria-hidden="true"></i>',
                        '<i class="fa fa-angle-right" aria-hidden="true"></i>'
                    ]
                },
                1000: {
                    items: 1,
                    stagePadding: 50,
                    loop: true,
                    margin: 10,
                    dots: false,
                    nav: true,
                    navText: [
                        '<i class="fa fa-angle-left" aria-hidden="true"></i>',
                        '<i class="fa fa-angle-right" aria-hidden="true"></i>'
                    ]
                }
            }
        })
    }

// Carousel Programme du jour
    if ($('.programme-carousel .owl-carousel').length) {
        var $owl = $('.programme-carousel .owl-carousel').owlCarousel({
            stagePadding: 5,
            loop: true,
            margin: 10,
            dots: false,
            nav: true,
            navText: [
                '<i class="fa fa-angle-left" aria-hidden="true"></i>',
                '<i class="fa fa-angle-right" aria-hidden="true"></i>'
            ],
            responsive: {
                0: {
                    items: 1
                },
                600: {
                    items: 1
                },
                1000: {
                    items: 3
                }
            }
        })
    }

// Carousel podcast
    if ($('.list-episode').length) {
        $(".list-episode").each(function () {
            $(this).find('.podcast-carousel .owl-carousel').owlCarousel({
                stagePadding: 5,
                loop: false,
                margin: 0,
                dots: false,
                nav: true,
                navContainer: $(this).find('.cust-nav'),
                navText: [
                    '<i class="fa fa-angle-left" aria-hidden="true"></i>',
                    '<i class="fa fa-angle-right" aria-hidden="true"></i>'
                ],
                responsive: {
                    0: {
                        items: 1
                    },
                    600: {
                        items: 3
                    },
                    1000: {
                        items: 4
                    }
                }
            });
        });
    }
}
owlCarousel();


function setPlayer(k, d) {
    setTimeout(() => {
        $(k).each((i, el) => {
            const player = new ezyWave(el);
        })
    }, 500)
}